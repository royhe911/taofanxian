<extend name="public/modal" />
<block name="title">分配任务</block>
<block name="menu">
	<div class="Hui-article" style="top: -10px;">
		<div>
			<div class="pd-20">
				<div class="mt-20">
					<div class="dataTables_wrapper">
						<table class="table table-border table-bordered table-bg table-hover table-sort">
							<thead>
								<tr class="text-c">
									<th>业务员</th>
									<th>任务份数</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								<tr class="text-c va-m">
									<td class="text-l">业务员a</td>
									<td class="text-l num-input"></td>
									<td>
										<a href="javascript:;" title="分配份数" class="allot-a" onclick="allotNum(this)">分配份数</a>
										<a href="javascript:;" title="确定" class="sure-a" style="display: none;" onclick="sureNum(this,'0001')">确定</a>
										<a href="javascript:;" title="取消" class="cancel-a" style="display: none;" onclick="cancelNum(this)">取消</a>
									</td>
								</tr>
								<tr class="text-c va-m">
									<td class="text-l">业务员b</td>
									<td class="text-l num-input"></td>
									<td>
										<a href="javascript:;" title="分配份数" class="allot-a" onclick="allotNum(this)">分配份数</a>
										<a href="javascript:;" title="确定" class="sure-a" style="display: none;" onclick="sureNum(this,'0001')">确定</a>
										<a href="javascript:;" title="取消" class="cancel-a" style="display: none;" onclick="cancelNum(this)">取消</a>
									</td>
								</tr>
								<tr class="text-c va-m">
									<td class="text-l">业务员c</td>
									<td class="text-l num-input"></td>
									<td>
										<a href="javascript:;" title="分配份数" class="allot-a" onclick="allotNum(this)">分配份数</a>
										<a href="javascript:;" title="确定" class="sure-a" style="display: none;" onclick="sureNum(this,'0001')">确定</a>
										<a href="javascript:;" title="取消" class="cancel-a" style="display: none;" onclick="cancelNum(this)">取消</a>
									</td>
								</tr>
								<tr class="text-c va-m">
									<td class="text-l">业务员d</td>
									<td class="text-l num-input"></td>
									<td>
										<a href="javascript:;" title="分配份数" class="allot-a" onclick="allotNum(this)">分配份数</a>
										<a href="javascript:;" title="确定" class="sure-a" style="display: none;" onclick="sureNum(this,'0001')">确定</a>
										<a href="javascript:;" title="取消" class="cancel-a" style="display: none;" onclick="cancelNum(this)">取消</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</block>
<block name="js">
<script type="text/javascript">
	//指定份数
	function allotNum(el){
		$(el).hide().siblings('a').show();
		var num = $(el).parent().siblings(".num-input").text();
		if(num){
			$(el).parent().siblings(".num-input").html("<input type='number' value='"+num+"'>");
		}else{
			$(el).parent().siblings(".num-input").html("<input type='number' placeholder='最多x份'>");
		}

	}
	//取消
	function cancelNum(el){
		$(el).hide().siblings('.allot-a').show().siblings('.sure-a').hide();
		var num = $(el).parent().siblings(".num-input").text();
		if(num){
			$(el).parent().siblings(".num-input").html(num);
		}else{
			$(el).parent().siblings(".num-input").empty();
		}

	}
	//提交
	function sureNum(el,id){
		$(el).hide().siblings('.allot-a').show().siblings('.cancel-a').hide();
		var allot_num = $(el).parent().siblings(".num-input").find('input').val();
		$(el).parent().siblings(".num-input").empty().html(allot_num);
//		$.post();
	}
</script>
</block>
